<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="layout">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>websocket</title>

    <link rel="shortcut icon" th:href="@{/favicon.ico}" href="../static/favicon.ico" />
    <script th:src="@{/assets/js/jquery.min.js}" src="./js/jquery.min.js"></script>
    <script th:src="@{/assets/js/sockjs.min.js}" src="./js/sockjs.min.js"></script>
    <script th:src="@{/assets/js/stomp.min.js}" src="./js/stomp.min.js"></script>
    <script>
        $(function() {
            function init(){
                var stompClient = null;
                // var socket = new SockJS('http://api-order-bweb.uat1.rs.com/p-trade-oc-bweb/websocket/trade/order/paid');
                // var socket = new SockJS('https://api-order-bweb.mmall.com/p-trade-oc-bweb/websocket/trade/order/paid');
                // var socket = new SockJS("http://localhost:8080/websocket/trade/order/paid");
                // var socket = new SockJS('http://api-order-bweb.uat1.rs.com/p-trade-oc-bweb/websocket/trade/order/paid');
                // var socket = new SockJS('http://api-order-bweb.uat1.rs.com/p-trade-oc-bweb/websocket/trade/order/paid');
                // var socket = new SockJS('http://local.rs.com:53105/p-trade-oc-bweb/websocket/trade/order/paid',null,{transports:["xhr-streaming"]});
                var socket = new SockJS('https://api-order-bweb.mklmall.com/p-trade-oc-bweb/websocket/trade/order/paid',null,{transports:["xhr-streaming"]});
                // var socket = new SockJS('https://localhost:4433/p-trade-oc-bweb/websocket/trade/order/paid');
                // var socket = new SockJS('http://localhost:8081/p-trade-oc-bweb/websocket/trade/order/paid');
                // var socket = new SockJS('http://localhost:53105/p-trade-oc-bweb/websocket/trade/order/paid');
                stompClient = Stomp.over(socket);
                stompClient.connect({
                    serialNumber: '8jdjuc1kio77h64d1ih7c1mul4',
                    paymentId:'98654657687654546'
                }, function (frame) {
                    stompClient.subscribe('/trade/topic/qrPaymentBroker', function (greeting) {
                        // alert(greeting);
                    });
                });
            }

            init();
        });
    </script>
</head>

<style type="text/css">
    body,
    html,
    a {
        width: 100%;
        height: 100%;
    }
</style>


<script >

</script>

<body>
<h2>请查看控制台</h2>  <span th:text="${test}"></span>
</body>

</html>
